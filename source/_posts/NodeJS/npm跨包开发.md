---
title: npm跨包开发
date: 2022-07-20 11:16:00
categories:
  - NodeJS
  - 常用工具
tags: 实践
---

<div></div>

<!-- more -->

## 背景

项目 `A` 打包后的依赖，需要在项目 `B` 里面使用。

## 可行的方法

### 手动迁移

可以在开发项目 `A` 时，把打包后的文件，手动粘贴到项目 `B` 的 `node_modules` 里。这么做是可行的，但是效率太低，时间成本太高。

### 发布后再使用

项目 `A` 开发完成后，发布到 `npm` 上，然后去项目 `B` 上下载下来使用。这么做不仅效率低且麻烦，还不利于项目的版本管理。

## 更好的方法

当项目 `A` 在开发后，使用 `npm link` 把项目 `A` 软连接到一个全局的 `node_modules` 下。然后在项目 `B`里面，使用 `npm link ${A的包名}`，即可建立项目 `B` 对项目 `A` 依赖包的索引。每当项目 `A` 打包后，项目 `B` 就能拿到实时打包后的结果。

在项目 `B` 里，如果不需要在引用本地的项目 `A` 了，那就 `npm unlink ${A的包名}` 即可实现

> 注意：`link` 或者 `unlink` 失败时，需要用 `sudo` 或者管理员身份执行命令
