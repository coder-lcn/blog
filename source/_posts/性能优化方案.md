---
title: 软件性能优化方案
date: 2022-04-20 10:17:20
tags: 性能优化
categories: 计算机
---

比较通用的性能优化，就是将数据存储在内存中。内存直接由 cpu 控制，所以它的读取速度非常快。而像文件系统那样存储在硬盘上的数据，是通过桥接芯片与 CPU 相连，所以对比下来会稍微慢一点。

<!-- more -->

通常我们都知道，数据应该存储在数据库中。但是数据库中的数据具体在哪，我们很少关心。**它是以文件的形式，存储在硬盘上的数据。**知道这一点就可以知道，数据库的访问速度是没有访问内存快的。

以 `js` 为例，假设我们有一个用户列表的数据表，通过内存存储，就可以做到性能提升。

```JavaScript
const userList = new Map();

const getUserList = async = () => {
  // 从数据库获取用户列表
}

// 服务启动时执行一次
const startup = async () => {
  const userList = await getUserList();

  userList.forEach(user => {
    // 把每个用户数据，存储在内存上
    userList.set(user.id, user);
  });
}
```

这么做的好处就是，用户数据的 CURD 操作，可以直接通过内存获取，再进行调整。结合相关的库做异步更新，可以很大幅度缓解服务端压力。

> 值得反思的是，这么做会有一个很明显的问题：内存崩溃了怎么办？
